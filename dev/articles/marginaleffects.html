<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="marginaleffects">
<title>Get Started • marginaleffects</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
<meta property="og:description" content="marginaleffects">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">marginaleffects</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.9.0.9045</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/marginaleffects.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/vincentarelbundock/marginaleffects/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Get Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/vincentarelbundock/marginaleffects/blob/HEAD/vignettes/marginaleffects.Rmd" class="external-link"><code>vignettes/marginaleffects.Rmd</code></a></small>
      <div class="d-none name"><code>marginaleffects.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the latest CRAN release:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"marginaleffects"</span><span class="op">)</span></span></code></pre></div>
<p>Install the development version:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"marginaleffects"</span>, <span class="st">"insight"</span><span class="op">)</span>,</span>
<span>    repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://vincentarelbundock.r-universe.dev"</span>, <span class="st">"https://easystats.r-universe.dev"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><em>Restart <code>R</code> completely before moving on.</em></p>
</div>
<div class="section level2">
<h2 id="estimands-predictions-comparisons-and-slopes">Estimands: Predictions, Comparisons, and Slopes<a class="anchor" aria-label="anchor" href="#estimands-predictions-comparisons-and-slopes"></a>
</h2>
<p>The <code>marginaleffects</code> package allows <code>R</code> users
to compute and plot three principal quantities of interest: (1)
predictions, (2) comparisons, and (3) slopes. In addition, the package
includes a convenience function to compute a fourth estimand, “marginal
means”, which is a special case of averaged predictions.
<code>marginaleffects</code> can also average (or “marginalize”)
unit-level (or “conditional”) estimates of all those quantities, and
conduct hypothesis tests on them.</p>
<p><a href="articles/predictions.html"><em>Predictions</em>:</a></p>
<blockquote>
<p>The outcome predicted by a fitted model on a specified scale for a
given combination of values of the predictor variables, such as their
observed values, their means, or factor levels. a.k.a. Fitted values,
adjusted predictions. <code><a href="../reference/predictions.html">predictions()</a></code>,
<code><a href="../reference/predictions.html">avg_predictions()</a></code>, <code><a href="../reference/plot_predictions.html">plot_predictions()</a></code>.</p>
</blockquote>
<p><a href="articles/comparisons.html"><em>Comparisons</em>:</a></p>
<blockquote>
<p>Compare the predictions made by a model for different regressor
values (e.g., college graduates vs. others): contrasts, differences,
risk ratios, odds, etc. <code><a href="../reference/comparisons.html">comparisons()</a></code>,
<code><a href="../reference/comparisons.html">avg_comparisons()</a></code>, <code><a href="../reference/plot_comparisons.html">plot_comparisons()</a></code>.</p>
</blockquote>
<p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/slopes.html"><em>Slopes</em>:</a></p>
<blockquote>
<p>Partial derivative of the regression equation with respect to a
regressor of interest. a.k.a. Marginal effects, trends.
<code><a href="../reference/slopes.html">slopes()</a></code>, <code><a href="../reference/slopes.html">avg_slopes()</a></code>,
<code><a href="../reference/plot_slopes.html">plot_slopes()</a></code>.</p>
</blockquote>
<p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/marginalmeans.html"><em>Marginal
Means</em>:</a></p>
<blockquote>
<p>Predictions of a model, averaged across a “reference grid” of
categorical predictors. <code><a href="../reference/marginalmeans.html">marginalmeans()</a></code>.</p>
</blockquote>
<p>Predictions, comparisons, and slopes are fundamentally unit-level (or
“conditional”) quantities. Except in the simplest linear case, estimates
will typically vary based on the values of all the regressors in a
model. Each of the observations in a dataset is thus associated with its
own prediction, comparison, and slope estimates. Below, we will see that
it can be useful to marginalize (or “average over”) unit-level estimates
to report an “average prediction”, “average comparison”, or “average
slope”.</p>
<p>One ambiguous aspect of the definitions above is that the word
“marginal” comes up in two different and <em>opposite</em> ways:</p>
<ol style="list-style-type: decimal">
<li>In “marginal effects,” we refer to the effect of a tiny (marginal)
change in the regressor on the outcome. This is a slope, or
derivative.</li>
<li>In “marginal means,” we refer to the process of marginalizing across
rows of a prediction grid. This is an average, or integral.</li>
</ol>
<p>On this website and in this package, we reserve the expression
“marginal effect” to mean a “slope” or “partial derivative”.</p>
<p>The <code>marginaleffects</code> package includes functions to
estimate, average, plot, and summarize all of the estimands described
above. The objects produced by <code>marginaleffects</code> are “tidy”:
they produce simple data frames in “long” format. They are also
“standards-compliant” and work seamlessly with standard functions like
<code><a href="https://rdrr.io/pkg/PairedData/man/summary.html" class="external-link">summary()</a></code>, <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>, <code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code>, and
<code><a href="https://generics.r-lib.org/reference/glance.html" class="external-link">glance()</a></code>, as well with <a href="https://vincentarelbundock.github.io/modelsummary/" class="external-link">external
packages like <code>modelsummary</code></a> or <code>ggplot2</code>.</p>
<p>We now apply <code>marginaleffects</code> functions to compute each
of the estimands described above. First, we fit a linear regression
model with multiplicative interactions:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vincentarelbundock.github.io/marginaleffects/">marginaleffects</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">hp</span> <span class="op">*</span> <span class="va">wt</span> <span class="op">*</span> <span class="va">am</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></code></pre></div>
<p>Then, we call the <code><a href="../reference/predictions.html">predictions()</a></code> function. As noted
above, predictions are unit-level estimates, so there is one specific
prediction per observation. By default, the <code><a href="../reference/predictions.html">predictions()</a></code>
function makes one prediction per observation in the dataset that was
used to fit the original model. Since <code>mtcars</code> has 32 rows,
the <code><a href="../reference/predictions.html">predictions()</a></code> outcome also has 32 rows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pre</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 32</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">pre</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 32</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pre</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Estimate Std. Error      z   Pr(&gt;|z|)  2.5 % 97.5 %</span></span>
<span><span class="co">##     22.49     0.8841 25.435 &lt; 2.22e-16 20.756  24.22</span></span>
<span><span class="co">##     20.80     1.1942 17.419 &lt; 2.22e-16 18.461  23.14</span></span>
<span><span class="co">##     25.26     0.7085 35.658 &lt; 2.22e-16 23.876  26.65</span></span>
<span><span class="co">##     20.26     0.7045 28.753 &lt; 2.22e-16 18.875  21.64</span></span>
<span><span class="co">##     17.00     0.7119 23.878 &lt; 2.22e-16 15.603  18.39</span></span>
<span><span class="co">## --- 22 rows omitted. See ?avg_predictions and ?print.marginaleffects --- </span></span>
<span><span class="co">##     29.59     1.8735 15.795 &lt; 2.22e-16 25.921  33.27</span></span>
<span><span class="co">##     15.90     1.3107 12.128 &lt; 2.22e-16 13.327  18.47</span></span>
<span><span class="co">##     19.41     1.1454 16.947 &lt; 2.22e-16 17.167  21.66</span></span>
<span><span class="co">##     14.79     2.0174  7.330 2.2943e-13 10.834  18.74</span></span>
<span><span class="co">##     21.46     1.0719 20.022 &lt; 2.22e-16 19.361  23.56 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, estimate, std.error, statistic, p.value, conf.low, conf.high, mpg, hp, wt, am</span></span></code></pre>
<p>Now, we use the <code><a href="../reference/comparisons.html">comparisons()</a></code> function to compute the
difference in predicted outcome when each of the predictors is
incremented by 1 unit (one predictor at a time, holding all others
constant). Once again, comparisons are unit-level quantities. And since
there are 3 predictors in the model and our data has 32 rows, we obtain
96 comparisons:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/comparisons.html">comparisons</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">cmp</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 96</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cmp</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term Contrast  Estimate Std. Error       z   Pr(&gt;|z|)     2.5 %     97.5 %</span></span>
<span><span class="co">##    hp       +1 -0.036906    0.01850 -1.9947 0.04607449  -0.07317 -0.0006429</span></span>
<span><span class="co">##    hp       +1 -0.028689    0.01563 -1.8357 0.06640282  -0.05932  0.0019422</span></span>
<span><span class="co">##    hp       +1 -0.046572    0.02259 -2.0619 0.03922051  -0.09084 -0.0023017</span></span>
<span><span class="co">##    hp       +1 -0.042271    0.01328 -3.1824 0.00146054  -0.06831 -0.0162375</span></span>
<span><span class="co">##    hp       +1 -0.039018    0.01341 -2.9095 0.00362022  -0.06530 -0.0127338</span></span>
<span><span class="co">## --- 86 rows omitted. See ?avg_comparisons and ?print.marginaleffects --- </span></span>
<span><span class="co">##    am    1 - 0  4.080730    3.93510  1.0370 0.29973237  -3.63193 11.7933866</span></span>
<span><span class="co">##    am    1 - 0  2.106353    2.28920  0.9201 0.35750670  -2.38040  6.5931031</span></span>
<span><span class="co">##    am    1 - 0  0.895066    1.64419  0.5444 0.58617945  -2.32749  4.1176203</span></span>
<span><span class="co">##    am    1 - 0  4.027219    3.24024  1.2429 0.21391295  -2.32353 10.3779686</span></span>
<span><span class="co">##    am    1 - 0 -0.236915    1.58642 -0.1493 0.88128621  -3.34625  2.8724165 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, term, contrast, estimate, std.error, statistic, p.value, conf.low, conf.high, predicted, predicted_hi, predicted_lo, mpg, hp, wt, am, eps</span></span></code></pre>
<p>The <code><a href="../reference/comparisons.html">comparisons()</a></code> function allows customized queries.
For example, what happens to the predicted outcome when the
<code>hp</code> variable increases from 100 to 120?</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comparisons.html">comparisons</a></span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term  Contrast Estimate Std. Error       z  Pr(&gt;|z|)   2.5 %    97.5 %</span></span>
<span><span class="co">##    hp 120 - 100  -0.7381     0.3700 -1.9947 0.0460745 -1.4634 -0.012857</span></span>
<span><span class="co">##    hp 120 - 100  -0.5738     0.3126 -1.8357 0.0664028 -1.1864  0.038843</span></span>
<span><span class="co">##    hp 120 - 100  -0.9314     0.4517 -2.0619 0.0392205 -1.8168 -0.046033</span></span>
<span><span class="co">##    hp 120 - 100  -0.8454     0.2657 -3.1824 0.0014605 -1.3661 -0.324750</span></span>
<span><span class="co">##    hp 120 - 100  -0.7804     0.2682 -2.9095 0.0036202 -1.3061 -0.254677</span></span>
<span><span class="co">## --- 22 rows omitted. See ?avg_comparisons and ?print.marginaleffects --- </span></span>
<span><span class="co">##    hp 120 - 100  -1.4515     0.7052 -2.0581 0.0395803 -2.8337 -0.069212</span></span>
<span><span class="co">##    hp 120 - 100  -0.3837     0.2698 -1.4221 0.1549843 -0.9125  0.145101</span></span>
<span><span class="co">##    hp 120 - 100  -0.6415     0.3345 -1.9178 0.0551304 -1.2970  0.014087</span></span>
<span><span class="co">##    hp 120 - 100  -0.1259     0.2722 -0.4627 0.6435969 -0.6594  0.407510</span></span>
<span><span class="co">##    hp 120 - 100  -0.6350     0.3323 -1.9112 0.0559829 -1.2862  0.016213 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, term, contrast, estimate, std.error, statistic, p.value, conf.low, conf.high, predicted, predicted_hi, predicted_lo, mpg, hp, wt, am, eps</span></span></code></pre>
<p>What happens to the predicted outcome when the <code>wt</code>
variable increases by 1 standard deviation about its mean?</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comparisons.html">comparisons</a></span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hp <span class="op">=</span> <span class="st">"sd"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term                Contrast Estimate Std. Error       z  Pr(&gt;|z|)  2.5 %   97.5 %</span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -2.5304     1.2685 -1.9947 0.0460745 -5.017 -0.04408</span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -1.9670     1.0715 -1.8357 0.0664028 -4.067  0.13316</span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -3.1931     1.5486 -2.0619 0.0392205 -6.228 -0.15781</span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -2.8982     0.9107 -3.1824 0.0014605 -4.683 -1.11329</span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -2.6752     0.9195 -2.9095 0.0036202 -4.477 -0.87307</span></span>
<span><span class="co">## --- 22 rows omitted. See ?avg_comparisons and ?print.marginaleffects --- </span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -4.9758     2.4177 -2.0581 0.0395803 -9.714 -0.23727</span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -1.3153     0.9249 -1.4221 0.1549843 -3.128  0.49743</span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -2.1990     1.1466 -1.9178 0.0551304 -4.446  0.04829</span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -0.4317     0.9330 -0.4627 0.6435969 -2.260  1.39700</span></span>
<span><span class="co">##    hp (x + sd/2) - (x - sd/2)  -2.1769     1.1390 -1.9112 0.0559829 -4.409  0.05558 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, term, contrast, estimate, std.error, statistic, p.value, conf.low, conf.high, predicted, predicted_hi, predicted_lo, mpg, hp, wt, am, eps</span></span></code></pre>
<p>The <code><a href="../reference/comparisons.html">comparisons()</a></code> function also allows users to specify
arbitrary functions of predictions, with the <code>transform_pre</code>
argument. For example, what is the average ratio between predicted Miles
per Gallon after an increase of 50 units in Horsepower?</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comparisons.html">comparisons</a></span><span class="op">(</span></span>
<span>  <span class="va">mod</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hp <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>  transform_pre <span class="op">=</span> <span class="st">"ratioavg"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term  Contrast Estimate Std. Error     z   Pr(&gt;|z|)  2.5 % 97.5 %</span></span>
<span><span class="co">##    hp mean(+50)   0.9095    0.02895 31.42 &lt; 2.22e-16 0.8528 0.9663</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: type, term, contrast, estimate, std.error, statistic, p.value, conf.low, conf.high, predicted, predicted_hi, predicted_lo</span></span></code></pre>
<p>See the <a href="https://vincentarelbundock.github.io/marginaleffects/articles/comparisons.html">Comparisons
vignette for detailed explanations and more options.</a></p>
<p>The <code><a href="../reference/slopes.html">slopes()</a></code> function allows us to compute the partial
derivative of the outcome equation with respect to each of the
predictors. Once again, we obtain a data frame with 96 rows:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mfx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/slopes.html">slopes</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mfx</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 96</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mfx</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term Contrast  Estimate Std. Error       z   Pr(&gt;|z|)     2.5 %     97.5 %</span></span>
<span><span class="co">##    hp    dY/dX -0.036906    0.01850 -1.9947 0.04607452  -0.07317 -0.0006429</span></span>
<span><span class="co">##    hp    dY/dX -0.028689    0.01563 -1.8357 0.06640280  -0.05932  0.0019422</span></span>
<span><span class="co">##    hp    dY/dX -0.046572    0.02259 -2.0619 0.03922050  -0.09084 -0.0023017</span></span>
<span><span class="co">##    hp    dY/dX -0.042271    0.01328 -3.1824 0.00146054  -0.06831 -0.0162375</span></span>
<span><span class="co">##    hp    dY/dX -0.039018    0.01341 -2.9095 0.00362022  -0.06530 -0.0127338</span></span>
<span><span class="co">## --- 86 rows omitted. See ?avg_slopes and ?print.marginaleffects --- </span></span>
<span><span class="co">##    am    1 - 0  4.080730    3.93510  1.0370 0.29973237  -3.63193 11.7933866</span></span>
<span><span class="co">##    am    1 - 0  2.106353    2.28920  0.9201 0.35750670  -2.38040  6.5931031</span></span>
<span><span class="co">##    am    1 - 0  0.895066    1.64419  0.5444 0.58617945  -2.32749  4.1176203</span></span>
<span><span class="co">##    am    1 - 0  4.027219    3.24024  1.2429 0.21391295  -2.32353 10.3779686</span></span>
<span><span class="co">##    am    1 - 0 -0.236915    1.58642 -0.1493 0.88128621  -3.34625  2.8724165 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, term, contrast, estimate, std.error, statistic, p.value, conf.low, conf.high, predicted, predicted_hi, predicted_lo, mpg, hp, wt, am, eps</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="grid">Grid<a class="anchor" aria-label="anchor" href="#grid"></a>
</h2>
<p>Predictions, comparisons, and slopes are typically “conditional”
quantities which depend on the values of all the predictors in the
model. By default, <code>marginaleffects</code> functions estimate
quantities of interest for the empirical distribution of the data (i.e.,
for each row of the original dataset). However, users can specify the
exact values of the predictors they want to investigate by using the
<code>newdata</code> argument.</p>
<p><code>newdata</code> accepts data frames, shortcut strings, or a call
to the <code><a href="../reference/datagrid.html">datagrid()</a></code> function. For example, to compute the
predicted outcome for a hypothetical car with all predictors equal to
the sample mean or median, we can do:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Estimate Std. Error     z   Pr(&gt;|z|) 2.5 % 97.5 %       hp      wt      am</span></span>
<span><span class="co">##     18.37     0.6799 27.02 &lt; 2.22e-16 17.04   19.7 146.6875 3.21725 0.40625</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, estimate, std.error, statistic, p.value, conf.low, conf.high, mpg, hp, wt, am</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="st">"median"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Estimate Std. Error    z   Pr(&gt;|z|) 2.5 % 97.5 %  hp    wt      am</span></span>
<span><span class="co">##     18.67     0.8188 22.8 &lt; 2.22e-16 17.06  20.27 123 3.325 0.40625</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, estimate, std.error, statistic, p.value, conf.low, conf.high, mpg, hp, wt, am</span></span></code></pre>
<p>The <a href="https://vincentarelbundock.github.io/marginaleffects/reference/datagrid.html"><code>datagrid</code>
function gives us a powerful way to define a grid of predictors.</a> All
the variables not mentioned explicitly in <code><a href="../reference/datagrid.html">datagrid()</a></code> are
fixed to their mean or mode:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span></span>
<span>  <span class="va">mod</span>,</span>
<span>  newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span></span>
<span>    am <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>    wt <span class="op">=</span> <span class="va">range</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Estimate Std. Error     z   Pr(&gt;|z|)  2.5 % 97.5 %       hp am    wt</span></span>
<span><span class="co">##    23.259      2.706 8.596 &lt; 2.22e-16 17.956  28.56 146.6875  0 1.513</span></span>
<span><span class="co">##    12.793      2.978 4.295 1.7459e-05  6.955  18.63 146.6875  0 5.424</span></span>
<span><span class="co">##    27.148      2.852 9.520 &lt; 2.22e-16 21.559  32.74 146.6875  1 1.513</span></span>
<span><span class="co">##     5.902      5.815 1.015    0.31013 -5.495  17.30 146.6875  1 5.424</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, estimate, std.error, statistic, p.value, conf.low, conf.high, mpg, hp, am, wt</span></span></code></pre>
<p>The same mechanism is available in <code><a href="../reference/comparisons.html">comparisons()</a></code> and
<code><a href="../reference/slopes.html">slopes()</a></code>. To estimate the partial derivative of
<code>mpg</code> with respect to <code>wt</code>, when <code>am</code>
is equal to 0 and 1, while other predictors are held at their means:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/slopes.html">slopes</a></span><span class="op">(</span></span>
<span>  <span class="va">mod</span>,</span>
<span>  variables <span class="op">=</span> <span class="st">"wt"</span>,</span>
<span>  newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span>am <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term Estimate Std. Error      z Pr(&gt;|z|)  2.5 %  97.5 %       hp      wt am</span></span>
<span><span class="co">##    wt   -2.676      1.419 -1.886 0.059354 -5.458  0.1056 146.6875 3.21725  0</span></span>
<span><span class="co">##    wt   -5.432      2.152 -2.524 0.011605 -9.651 -1.2139 146.6875 3.21725  1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, term, estimate, std.error, statistic, p.value, conf.low, conf.high, predicted, predicted_hi, predicted_lo, mpg, hp, wt, am, eps</span></span></code></pre>
<p>We can also plot how predictions, comparisons, or slopes change
across different values of the predictors using <a href="https://vincentarelbundock.github.io/marginaleffects/articles/plot.html">three
powerful plotting functions:</a></p>
<ul>
<li>
<code>plot_predictions</code>: Conditional Adjusted Predictions</li>
<li>
<code>plot_comparisons</code>: Conditional Comparisons</li>
<li>
<code>plot_slopes</code>: Conditional Marginal Effects</li>
</ul>
<p>For example, this plot shows the outcomes predicted by our model for
different values of the <code>wt</code> and <code>am</code>
variables:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_predictions.html">plot_predictions</a></span><span class="op">(</span><span class="va">mod</span>, condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span> <span class="op">=</span> <span class="st">"threenum"</span>, <span class="st">"am"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>This plot shows how the derivative of <code>mpg</code> with respect
to <code>am</code> varies as a function of <code>wt</code> and
<code>hp</code>:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_slopes.html">plot_slopes</a></span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="st">"am"</span>, condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span> <span class="op">=</span> <span class="st">"minmax"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>See this vignette for more information: <a href="https://vincentarelbundock.github.io/marginaleffects/articles/plot.html">Plots,
interactions, predictions, contrasts, and slopes</a></p>
</div>
<div class="section level2">
<h2 id="averaging">Averaging<a class="anchor" aria-label="anchor" href="#averaging"></a>
</h2>
<p>Since predictions, comparisons, and slopes are conditional
quantities, they can be a bit unwieldy. Often, it can be useful to
report a one-number summary instead of one estimate per observation.
Instead of presenting “conditional” estimates, some methodologists
recommend reporting “marginal” estimates, that is, an average of
unit-level estimates.</p>
<p>(This use of the word “marginal” as “averaging” should not be
confused with the term “marginal effect” which, in the econometrics
tradition, corresponds to a partial derivative, or the effect of a
“small/marginal” change.)</p>
<p>To marginalize (average over) our unit-level estimates, we can use
the <code>by</code> argument or the one of the convenience functions:
<code><a href="../reference/predictions.html">avg_predictions()</a></code>, <code><a href="../reference/comparisons.html">avg_comparisons()</a></code>, or
<code><a href="../reference/slopes.html">avg_slopes()</a></code>. For example, both of these commands give us
the same result: the average predicted outcome in the
<code>mtcars</code> dataset:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/predictions.html">avg_predictions</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Estimate Std. Error     z   Pr(&gt;|z|) 2.5 % 97.5 %</span></span>
<span><span class="co">##     20.09     0.3904 51.46 &lt; 2.22e-16 19.33  20.86</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: type, estimate, std.error, statistic, p.value, conf.low, conf.high</span></span></code></pre>
<p>This is equivalent to manual computation by:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 20.09062</span></span></code></pre>
<p>The main <code>marginaleffects</code> functions all include a
<code>by</code> argument, which allows us to marginalize within
sub-groups of the data. For example,</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comparisons.html">avg_comparisons</a></span><span class="op">(</span><span class="va">mod</span>, by <span class="op">=</span> <span class="st">"am"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term          Contrast am Estimate Std. Error       z  Pr(&gt;|z|)    2.5 %    97.5 %</span></span>
<span><span class="co">##    am mean(1) - mean(0)  0 -1.38301    2.52499 -0.5477 0.5838789 -6.33191  3.565888</span></span>
<span><span class="co">##    am mean(1) - mean(0)  1  1.90290    2.30863  0.8243 0.4097951 -2.62193  6.427728</span></span>
<span><span class="co">##    hp          mean(+1)  0 -0.03426    0.01586 -2.1598 0.0307863 -0.06536 -0.003171</span></span>
<span><span class="co">##    hp          mean(+1)  1 -0.04364    0.02129 -2.0498 0.0403865 -0.08537 -0.001912</span></span>
<span><span class="co">##    wt          mean(+1)  0 -2.47990    1.23163 -2.0135 0.0440605 -4.89385 -0.065954</span></span>
<span><span class="co">##    wt          mean(+1)  1 -6.07176    1.97621 -3.0724 0.0021233 -9.94506 -2.198458</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: type, term, contrast, am, estimate, std.error, statistic, p.value, conf.low, conf.high, predicted, predicted_hi, predicted_lo</span></span></code></pre>
<p>Marginal Means are a special case of predictions, which are
marginalized (or averaged) across a balanced grid of categorical
predictors. To illustrate, we estimate a new model with categorical
predictors:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">am</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">am</span><span class="op">)</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span>
<span><span class="va">mod_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">am</span> <span class="op">+</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">dat</span><span class="op">)</span></span></code></pre></div>
<p>We can compute marginal means manually using the functions already
described:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/predictions.html">avg_predictions</a></span><span class="op">(</span></span>
<span>  <span class="va">mod_cat</span>,</span>
<span>  newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span>cyl <span class="op">=</span> <span class="va">unique</span>, am <span class="op">=</span> <span class="va">unique</span><span class="op">)</span>,</span>
<span>  by <span class="op">=</span> <span class="st">"am"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##     am Estimate Std. Error     z   Pr(&gt;|z|) 2.5 % 97.5 %</span></span>
<span><span class="co">##  FALSE    18.32     0.7854 23.33 &lt; 2.22e-16 16.78  19.86</span></span>
<span><span class="co">##   TRUE    22.48     0.8343 26.94 &lt; 2.22e-16 20.84  24.11</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: type, am, estimate, std.error, statistic, p.value, conf.low, conf.high</span></span></code></pre>
<p>For convenience, the <code>marginaleffects</code> package also
includes a <code><a href="../reference/marginal_means.html">marginal_means()</a></code> function:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/marginal_means.html">marginal_means</a></span><span class="op">(</span><span class="va">mod_cat</span>, variables <span class="op">=</span> <span class="st">"am"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term Value  Mean Std. Error     z   Pr(&gt;|z|) 2.5 % 97.5 %</span></span>
<span><span class="co">##    am FALSE 18.32     0.7854 23.33 &lt; 2.22e-16 16.78  19.86</span></span>
<span><span class="co">##    am  TRUE 22.48     0.8343 26.94 &lt; 2.22e-16 20.84  24.11</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Results averaged over levels of: cyl, am </span></span>
<span><span class="co">## Columns: type, term, value, am, estimate, std.error, statistic, p.value, conf.low, conf.high</span></span></code></pre>
<p><a href="https://vincentarelbundock.github.io/marginaleffects/articles/marginalmeans.html">The
Marginal Means vignette</a> offers more detail.</p>
</div>
<div class="section level2">
<h2 id="hypothesis-and-equivalence-tests">Hypothesis and equivalence tests<a class="anchor" aria-label="anchor" href="#hypothesis-and-equivalence-tests"></a>
</h2>
<p>The <code><a href="../reference/hypotheses.html">hypotheses()</a></code> function and the
<code>hypothesis</code> argument can be used to conduct linear and
non-linear hypothesis tests on model coefficients, or on any of the
quantities computed by the functions introduced above.</p>
<p>Consider this model:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">qsec</span> <span class="op">*</span> <span class="va">drat</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## (Intercept)        qsec        drat   qsec:drat </span></span>
<span><span class="co">##  12.3371987  -1.0241183  -3.4371461   0.5973153</span></span></code></pre>
<p>Can we reject the null hypothesis that the <code>drat</code>
coefficient is 2 times the size of the <code>qsec</code>
coefficient?</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hypotheses.html">hypotheses</a></span><span class="op">(</span><span class="va">mod</span>, <span class="st">"drat = 2 * qsec"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##             Term Estimate Std. Error       z Pr(&gt;|z|)  2.5 % 97.5 %</span></span>
<span><span class="co">##  drat = 2 * qsec   -1.389      10.78 -0.1289  0.89744 -22.51  19.73</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  </span></span>
<span><span class="co">## Columns: term, estimate, std.error, statistic, p.value, conf.low, conf.high</span></span></code></pre>
<p>We can ask the same question but refer to parameters by position,
with indices <code>b1</code>, <code>b2</code>, <code>b3</code>,
etc.:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hypotheses.html">hypotheses</a></span><span class="op">(</span><span class="va">mod</span>, <span class="st">"b3 = 2 * b2"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##         Term Estimate Std. Error       z Pr(&gt;|z|)  2.5 % 97.5 %</span></span>
<span><span class="co">##  b3 = 2 * b2   -1.389      10.78 -0.1289  0.89744 -22.51  19.73</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  </span></span>
<span><span class="co">## Columns: term, estimate, std.error, statistic, p.value, conf.low, conf.high</span></span></code></pre>
<p>The main functions in <code>marginaleffects</code> all have a
<code>hypothesis</code> argument, which means that we can do complex
model testing. For example, consider two slope estimates:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/slopes.html">slopes</a></span><span class="op">(</span></span>
<span>  <span class="va">mod</span>,</span>
<span>  variables <span class="op">=</span> <span class="st">"drat"</span>,</span>
<span>  newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span>qsec <span class="op">=</span> <span class="va">range</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term Estimate Std. Error     z Pr(&gt;|z|)   2.5 % 97.5 %     drat qsec</span></span>
<span><span class="co">##  drat    5.224      3.791 1.378 0.168217 -2.2064  12.65 3.596563 14.5</span></span>
<span><span class="co">##  drat   10.241      5.161 1.984 0.047232  0.1252  20.36 3.596563 22.9</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: rowid, type, term, estimate, std.error, statistic, p.value, conf.low, conf.high, predicted, predicted_hi, predicted_lo, mpg, drat, qsec, eps</span></span></code></pre>
<p>Are these two slopes significantly different from one another? To
test this, we can use the <code>hypothesis</code> argument:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/slopes.html">slopes</a></span><span class="op">(</span></span>
<span>  <span class="va">mod</span>,</span>
<span>  hypothesis <span class="op">=</span> <span class="st">"b1 = b2"</span>,</span>
<span>  variables <span class="op">=</span> <span class="st">"drat"</span>,</span>
<span>  newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span>qsec <span class="op">=</span> <span class="va">range</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##   Term Estimate Std. Error      z Pr(&gt;|z|)  2.5 % 97.5 %</span></span>
<span><span class="co">##  b1=b2   -5.017      8.519 -0.589  0.55589 -21.71  11.68</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: type, term, estimate, std.error, statistic, p.value, conf.low, conf.high</span></span></code></pre>
<p>Now, imagine that for theoretical (or substantive or clinical)
reasons, we only care about slopes larger than 2. We can use the
<code><a href="../reference/hypotheses.html">hypotheses()</a></code> function to conduct an equivalence test:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/slopes.html">avg_slopes</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/hypotheses.html">hypotheses</a></span><span class="op">(</span>equivalence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Term Estimate Std. Error     z   Pr(&gt;|z|)  2.5 % 97.5 %   p (NonInf) p (NonSup)  p (Equiv)</span></span>
<span><span class="co">##  drat    7.224     1.3652 5.292 1.2122e-07 4.5484  9.900 7.062352e-12 0.99993505 0.99993505</span></span>
<span><span class="co">##  qsec    1.124     0.4331 2.595  0.0094487 0.2752  1.973 2.740294e-13 0.02158503 0.02158503</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Prediction type:  response </span></span>
<span><span class="co">## Columns: type, term, estimate, std.error, statistic, p.value, conf.low, conf.high, statistic.noninf, statistic.nonsup, p.value.noninf, p.value.nonsup, p.value.equiv</span></span></code></pre>
<p>See the <a href="https://vincentarelbundock.github.io/marginaleffects/articles/hypothesis.html">Hypothesis
Tests and Custom Contrasts vignette</a> for background, details, and for
instructions on how to conduct hypothesis tests in more complex
situations.</p>
</div>
<div class="section level2">
<h2 id="more">More!<a class="anchor" aria-label="anchor" href="#more"></a>
</h2>
<p>There is <em>much</em> more you can do with
<code>marginaleffects</code>. Return to the <a href="index.html">Table
of Contents</a> to read the vignettes, learn how to report marginal
effects in <a href="https://vincentarelbundock.github.io/modelsummary/" class="external-link">nice tables
with the <code>modelsummary</code> package</a>, how to define your own
prediction “grid”, and much more. ****</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Vincent Arel-Bundock.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
